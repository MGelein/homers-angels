function parseText(){var f=$("#textField").get(0).value;var l=f.split(/\r?\n/);var h=false;var c="";if(l[0].substr(0,4)=="urn#"){h=true;c=l.shift()}var e=0;var j=l.length;var b={};var a;var k;var d="0";var g;f="";for(e=0;e<j;e++){l[e]=l[e].split("#");a=(l[e][0]);k=(l[e][1]);d=""+(e+1);if(k==undefined){break}k=k.replace(/ *\[[^)]*\] */g,"");g=k.split("@");if(b.hasOwnProperty(g[1])){b[g[1]]=b[g[1]]+1;k=g[0]+"@"+g[1]+"["+b[g[1]]+"]"}else{b[g[1]]=1;k=g[0]+"@"+g[1]}var g=a.split(":");l[e][0]=a.substring(0,a.length-g[g.length-1].length)+d;l[e][1]=k;f+=l[e].join("#");f+="\n"}if(h){f=c+"\n"+f}$("#textField").val(f);copyTextToClipboard(f)}function copyTextToClipboard(b){var d=document.createElement("textarea");d.style.position="fixed";d.style.top=0;d.style.left=0;d.style.width="2em";d.style.height="2em";d.style.padding=0;d.style.border="none";d.style.outline="none";d.style.boxShadow="none";d.style.background="transparent";d.value=b;document.body.appendChild(d);d.select();try{var e=document.execCommand("copy");var c=e?"successful":"unsuccessful";if(c!="successful"){b="ERROR: UNABLE TO COPY"}else{b="Copied corrected file to Clipboard"}showNotif(b)}catch(a){showNotif("ERROR: UNABLE TO COPY")}document.body.removeChild(d)}function showNotif(a){$("#notification").removeClass().addClass("showNotification");$("#notificationText").html(a);setTimeout(function(){$("#notification").removeClass().addClass("hideNotification")},2000)};